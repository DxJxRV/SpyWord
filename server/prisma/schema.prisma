// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// Modelo de Palabras del juego
model Word {
  id        Int      @id @default(autoincrement())
  word      String   @unique @db.VarChar(100)
  category  String   @db.VarChar(50)
  weight    Int      @default(100)
  is_active Boolean  @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("words")
  @@index([is_active, weight])
  @@index([category])
}

// Modelo de Sugerencias de usuarios
model WordSuggestion {
  id          Int                    @id @default(autoincrement())
  word        String                 @db.VarChar(100)
  category    String?                @db.VarChar(50)
  status      WordSuggestionStatus   @default(PENDING)
  submittedAt DateTime               @default(now()) @map("submitted_at")

  @@map("word_suggestions")
  @@index([status])
}

// Enum para el estado de las sugerencias
enum WordSuggestionStatus {
  PENDING
  APPROVED
  REJECTED
}

// Modelo para Modos de Juego Especiales
model GameMode {
  id          Int      @id @default(autoincrement())
  name        String   @unique @db.VarChar(100)
  description String?  @db.Text
  isActive    Boolean  @default(true) @map("is_active")
  wordList    String   @db.Text // JSON string de la lista de palabras para este modo
  isDailyMode Boolean  @default(false) @map("is_daily_mode") // Solo uno debe ser true
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("game_modes")
  @@index([isActive, isDailyMode])
}

// Modelo de Usuario para autenticación y premium
model User {
  id              String    @id @default(uuid())
  email           String    @unique @db.VarChar(255)
  name            String?   @db.VarChar(255)
  googleId        String?   @unique @map("google_id") @db.VarChar(255)
  password        String?   @db.VarChar(255) // Para autenticación con email (bcrypt hash)
  isPremium       Boolean   @default(false) @map("is_premium") // CRUCIAL para anuncios y Premium Pass
  premiumExpiresAt DateTime? @map("premium_expires_at") // Fecha de expiración del premium
  createdAt       DateTime  @default(now()) @map("created_at")
  updatedAt       DateTime  @updatedAt @map("updated_at")

  @@map("users")
  @@index([googleId])
  @@index([isPremium])
  @@index([email])
}
